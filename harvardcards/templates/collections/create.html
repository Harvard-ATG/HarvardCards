{% extends "__layout_left_sidebar.html" %}

{% block sidebar_content %}
	{% include "_collection_nav.html" with collections=collections %}
{% endblock %}

{% block main_content %}
<div id="content">
    <div class="courseWrapper">
        <div class="courseHeader">
            <h2>Add course</h2>
        </div>
        <form action="{% url 'collectionCreate' %}" method="post">
            {% csrf_token %}
            <p>
                {{ collection_form.title.errors }}
                <label for="id_title">Title:</label>
                {{ collection_form.title }}
            </p>
            <p>
                {{ collection_form.card_template.errors }}
                <label for="id_card_template">Template:</label>
                {{ collection_form.card_template }}
            </p>
            <div id="cardTemplateContainer" data-fetch-url="{% url 'cardTemplatePreview' %}">
                Select a template
            </div>
            <div>
                <input class="adminMenuBtn saveBtn" type="submit" value="Submit" />
                <a href="{% url 'index' %}" class="adminMenuBtn cancelBtn">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}


{% block javascript %}
<script type="text/javascript">
require(['jquery', 'views/CardTemplatePreview'], function($, CardTemplatePreview) {
    $(document).ready(function() {
        var preview = new CardTemplatePreview({
            "previewEl": "#cardTemplateContainer",
            "selectEl": "#id_card_template",
        });
        preview.init();
    });
});
</script>
{% endblock %}
